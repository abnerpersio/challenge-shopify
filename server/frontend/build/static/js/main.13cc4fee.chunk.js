(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{44:function(e,t,r){},54:function(e,t,r){"use strict";r.r(t);var n=r(0),a=r.n(n),s=r(22),c=r.n(s),i=(r(44),r(45),r(56)),u=r(9),o=r(19),l=r(6),d=r.n(l),p=r(8),j=r(1),b=function(){var e=Object(p.a)(d.a.mark((function e(t){var r,n,a,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,n=t.password,e.next=3,fetch("../../login",{headers:{username:r,password:n}});case 3:if(200!==(a=e.sent).status){e.next=11;break}return e.next=7,a.json();case 7:return s=e.sent,e.abrupt("return",s);case 11:return alert("os dados de login est\xe3o incorretos!"),e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f={isAuthenticated:function(){var e=localStorage.getItem("user");return e||!1},signin:function(e){var t=this;return Object(p.a)(d.a.mark((function r(){var n,a,s;return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=e.username,a=e.password,r.next=3,b({username:n,password:a});case 3:if(!(s=r.sent)){r.next=9;break}return localStorage.setItem("user",JSON.stringify(s)),r.abrupt("return",t.isAuthenticated());case 9:return r.abrupt("return",!1);case 10:case"end":return r.stop()}}),r)})))()},signout:function(){return Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.removeItem("user");case 1:case"end":return e.stop()}}),e)})))()}},h=Object(n.createContext)();function x(){return Object(n.useContext)(h)}function O(e){var t=e.children,r=function(){var e=Object(n.useState)(f.isAuthenticated()||null),t=Object(o.a)(e,2),r=t[0],a=t[1];return{user:r,signin:function(){var e=Object(p.a)(d.a.mark((function e(t){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.username,n=t.password,e.next=3,f.signin({username:r,password:n});case 3:return s=e.sent,f.isAuthenticated()?a(s):a(null),e.abrupt("return",f.isAuthenticated());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),signout:function(){var e=Object(p.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.signout();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}();return Object(j.jsx)(h.Provider,{value:r,children:t})}var m=r(59),w=r(61),v=r(14);var g=function(){var e=x().signout,t=Object(u.f)(),r=function(){var r=Object(p.a)(d.a.mark((function r(){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e();case 2:t.push("/web/login");case 3:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return Object(j.jsx)(m.a,{bg:"dark",variant:"dark",children:Object(j.jsxs)(i.a,{children:[Object(j.jsx)(m.a.Brand,{children:Object(j.jsx)(v.b,{to:"/web/",children:"Desafio Shopify"})}),Object(j.jsxs)(w.a,{className:"me-auto",children:[Object(j.jsx)(v.b,{style:{color:"white",margin:"0px 10px",textDecoration:"none"},to:"/web/",children:"Produtos"}),Object(j.jsx)(v.b,{style:{color:"white",margin:"0px 10px",textDecoration:"none"},to:"/web/lista",children:"Minha Lista"}),Object(j.jsx)("span",{style:{color:"white",margin:"0px 10px",cursor:"pointer"},onClick:function(){return r()},children:"Sair"})]})]})})},k=r(60),S=r(57);var y=function(){var e=x().signin,t=Object(u.f)(),r=Object(n.useRef)(null),a=Object(n.useRef)(null),s=function(){var n=Object(p.a)(d.a.mark((function n(){return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e({username:r.current.value,password:a.current.value});case 2:n.sent&&t.push("/web/");case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return Object(j.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),s()},children:[Object(j.jsx)("h3",{className:"text-center",children:"Fa\xe7a seu login"}),Object(j.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(j.jsx)(k.a.Label,{children:"Nome de Usu\xe1rio"}),Object(j.jsx)(k.a.Control,{ref:r,type:"text",id:"input-login-username",required:!0,placeholder:"username"})]}),Object(j.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(j.jsx)(k.a.Label,{children:"Senha"}),Object(j.jsx)(k.a.Control,{ref:a,type:"password",id:"input-login-password",required:!0,placeholder:"senha"})]}),Object(j.jsx)(v.b,{to:"/web/register",className:"d-block",children:"Ainda n\xe3o possui uma conta?"}),Object(j.jsx)(S.a,{variant:"primary",type:"submit",children:"Fazer Login"})]})},N=r(39),J=r(58),C=r(62),E=r(34);function L(e){return Object(j.jsxs)(C.a,{className:"m-2",children:[Object(j.jsx)(C.a.Img,{variant:"top",style:{maxHeight:"300px",minHeight:"300px"},src:e.images[0].src}),Object(j.jsxs)(C.a.Body,{children:[Object(j.jsx)(C.a.Title,{children:e.title}),Object(j.jsx)("span",{className:"like-button",style:{cursor:"pointer",fontSize:"20px"},children:e.liked?Object(j.jsx)(E.b,{onClick:Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.unliker(e.id);case 2:case"end":return t.stop()}}),t)})))}):Object(j.jsx)(E.a,{onClick:Object(p.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.liker(e.id);case 2:case"end":return t.stop()}}),t)})))})})]})]})}function I(){var e=x().user,t=Object(n.useState)([]),r=Object(o.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)([]),u=Object(o.a)(c,2),l=u[0],b=u[1],f=function(){var t=Object(p.a)(d.a.mark((function t(){var r,n,a,c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={username:JSON.parse(e).username,password:JSON.parse(e).password},t.next=3,fetch("../../products",{headers:r});case 3:return n=t.sent,t.next=6,fetch("../../likes",{headers:r});case 6:return a=t.sent,t.next=9,n.json();case 9:return c=t.sent,t.next=12,a.json();case 12:i=t.sent,s(c),b(i);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(p.a)(d.a.mark((function t(r){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:JSON.parse(e).username,password:JSON.parse(e).password},t.next=3,fetch("../../likes/".concat(r),{method:"POST",headers:n});case 3:200===t.sent.status?f():alert("algo errado ocorreu :(");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(p.a)(d.a.mark((function t(r){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:JSON.parse(e).username,password:JSON.parse(e).password},t.next=3,fetch("../../likes/".concat(r),{method:"DELETE",headers:n});case 3:204===t.sent.status?f():alert("algo errado ocorreu :(");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){e&&f()}),[e]);var m=function(e){return l.find((function(t){return t.product_id===String(e)}))};return Object(j.jsxs)(i.a,{className:"mt-5",children:[Object(j.jsx)("h4",{children:"Lista de produtos curtidos"}),Object(j.jsx)(J.a,{children:null===a||void 0===a?void 0:a.map((function(e){return!!m(e.id)&&Object(j.jsx)(N.a,{lg:4,children:Object(j.jsx)(L,{title:e.title,id:e.id,images:e.images,liked:m(e.id),liker:h,unliker:O},e.id)})}))})]})}function B(){var e=x().user,t=Object(n.useState)([]),r=Object(o.a)(t,2),a=r[0],s=r[1],c=Object(n.useState)([]),u=Object(o.a)(c,2),l=u[0],b=u[1],f=function(){var t=Object(p.a)(d.a.mark((function t(){var r,n,a,c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={username:JSON.parse(e).username,password:JSON.parse(e).password},t.next=3,fetch("../../products",{headers:r});case 3:return n=t.sent,t.next=6,fetch("../../likes",{headers:r});case 6:return a=t.sent,t.next=9,n.json();case 9:return c=t.sent,t.next=12,a.json();case 12:i=t.sent,s(c),b(i);case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),h=function(){var t=Object(p.a)(d.a.mark((function t(r){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:JSON.parse(e).username,password:JSON.parse(e).password},t.next=3,fetch("../../likes/".concat(r),{method:"POST",headers:n});case 3:200===t.sent.status?f():alert("algo errado ocorreu :(");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=Object(p.a)(d.a.mark((function t(r){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={username:JSON.parse(e).username,password:JSON.parse(e).password},t.next=3,fetch("../../likes/".concat(r),{method:"DELETE",headers:n});case 3:204===t.sent.status?f():alert("algo errado ocorreu :(");case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(n.useEffect)((function(){e&&f()}),[e]);return Object(j.jsxs)(i.a,{className:"mt-5",children:[Object(j.jsx)("h4",{children:"Lista de produtos dispon\xedveis"}),Object(j.jsx)(J.a,{children:null===a||void 0===a?void 0:a.map((function(e){return Object(j.jsx)(N.a,{lg:4,children:Object(j.jsx)(L,{title:e.title,id:e.id,images:e.images,liked:(t=e.id,l.find((function(e){return e.product_id===String(t)}))),liker:h,unliker:O},e.id)});var t}))})]})}var A=function(){var e=x().signin,t=Object(n.useRef)(null),r=Object(n.useRef)(null),a=Object(n.useRef)(null),s=Object(u.f)(),c=function(){var t=Object(p.a)(d.a.mark((function t(r){var n,a,c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=JSON.stringify(r),t.next=3,fetch("../../users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:n});case 3:if(200!==(a=t.sent).status){t.next=14;break}return t.next=7,a.json();case 7:return c=t.sent,t.next=10,e({username:c.username,password:c.password});case 10:t.sent&&s.push("/web/"),t.next=18;break;case 14:return t.next=16,a.json();case 16:i=t.sent,alert("algo deu errado com o seu registro, ".concat(null===i||void 0===i?void 0:i.message));case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(j.jsxs)(k.a,{onSubmit:function(e){e.preventDefault(),function(){var e={username:t.current.value,email:r.current.value,password:a.current.value};c(e)}()},children:[Object(j.jsx)("h3",{className:"text-center",children:"Fa\xe7a seu cadastro"}),Object(j.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(j.jsx)(k.a.Label,{children:"Nome de Usu\xe1rio"}),Object(j.jsx)(k.a.Control,{ref:t,type:"text",id:"input-register-username",required:!0,placeholder:"username"})]}),Object(j.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicEmail",children:[Object(j.jsx)(k.a.Label,{children:"Seu email"}),Object(j.jsx)(k.a.Control,{ref:r,type:"email",id:"input-register-email",required:!0,placeholder:"seu email"})]}),Object(j.jsxs)(k.a.Group,{className:"mb-3",controlId:"formBasicPassword",children:[Object(j.jsx)(k.a.Label,{children:"Senha"}),Object(j.jsx)(k.a.Control,{ref:a,type:"password",id:"input-register-password",required:!0,placeholder:"senha"})]}),Object(j.jsx)(v.b,{to:"/web/login",className:"d-block",children:"J\xe1 possui conta e deseja fazer login?"}),Object(j.jsx)(S.a,{variant:"primary",type:"submit",children:"Cadastrar"})]})};var D=function(){var e=x().user,t=Object(u.f)();return e||t.push("/web/login"),Object(j.jsx)("div",{className:"app",children:Object(j.jsxs)(u.c,{children:[Object(j.jsxs)(u.a,{exact:!0,path:"/web/",children:[Object(j.jsx)(g,{}),Object(j.jsx)(B,{})]}),Object(j.jsxs)(u.a,{exact:!0,path:"/web/lista",children:[Object(j.jsx)(g,{}),Object(j.jsx)(I,{})]}),Object(j.jsx)(u.a,{exact:!0,path:"/web/login",children:Object(j.jsx)(i.a,{className:"p-5 mt-5 w-50",style:{minWidth:"600px"},children:Object(j.jsx)(y,{})})}),Object(j.jsx)(u.a,{exact:!0,path:"/web/register",children:Object(j.jsx)(i.a,{className:"p-5 mt-5 w-50",style:{minWidth:"600px"},children:Object(j.jsx)(A,{})})})]})})};c.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(O,{children:Object(j.jsx)(v.a,{children:Object(j.jsx)(D,{})})})}),document.getElementById("root"))}},[[54,1,2]]]);
//# sourceMappingURL=main.13cc4fee.chunk.js.map